
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="description" content="">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rails Issue #1</title>
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Rails Issue #1">
    <meta name="twitter:description" content="As you know, I've been working with Rails for a month or 2 now. It's been taxing but Google, RailsCasts, StackOverflow, and many other resources have guided me along without just throwing the answer my way. I like to learn by doing, not just copy/pasting. Even with all this">
    <meta name="twitter:creator" content="@seanoldham">
    <meta name="twitter:image" content="">
    <meta name="twitter:url" content="http://localhost:2368/2014/08/03/rails-issue-1/">
    <meta name="twitter:domain" content="http://localhost:2368">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css">
    <link href="../../../../assets/css/main.css?v=c7b356b74f" rel="stylesheet">
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="http://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css" rel="stylesheet">
    <link rel="icon" href="../../../../assets/img/icon.png?v=c7b356b74f">
    <link href="../../../../assets/css/prettify.css?v=c7b356b74f" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="../../../../assets/js/hover.zoom.js?v=c7b356b74f"></script>
    <script src="../../../../assets/js/hover.zoom.conf.js?v=c7b356b74f"></script>
    <link rel="canonical" href="http://localhost:2368/2014/08/03/rails-issue-1/">
    
    <meta property="og:site_name" content="code.seanosaur">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Rails Issue #1">
    <meta property="og:description" content="As you know, I've been working with Rails for a month or 2 now. It's been taxing but Google, RailsCasts, StackOverflow, and many other resources have guided me along without just throwing the answer my way. I like to learn...">
    <meta property="og:url" content="http://localhost:2368/2014/08/03/rails-issue-1/">
    <meta property="article:published_time" content="2014-08-03T13:37:46.000Z">
    <meta property="article:modified_time" content="2015-01-16T22:21:05.000Z">
    <meta property="article:tag" content="ruby">
    <meta property="article:tag" content="programming">
    <meta property="article:tag" content="issue">
    <meta property="article:tag" content="rails">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Rails Issue #1">
    <meta name="twitter:description" content="As you know, I've been working with Rails for a month or 2 now. It's been taxing but Google, RailsCasts, StackOverflow, and many other resources have guided me along without just throwing the answer my way. I like to learn...">
    <meta name="twitter:url" content="http://localhost:2368/2014/08/03/rails-issue-1/">
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "code.seanosaur",
    "author": {
        "@type": "Person",
        "name": "Sean Oldham",
        "image": "//www.gravatar.com/avatar/bb248f050fb8c9d6088b0cf337b9bea2?s=250&d=mm&r=x",
        "url": "http://localhost:2368/author/sean",
        "sameAs": null,
        "description": null
    },
    "headline": "Rails Issue #1",
    "url": "http://localhost:2368/2014/08/03/rails-issue-1/",
    "datePublished": "2014-08-03T13:37:46.000Z",
    "dateModified": "2015-01-16T22:21:05.000Z",
    "keywords": "ruby, programming, issue, rails",
    "description": "As you know, I&#x27;ve been working with Rails for a month or 2 now. It&#x27;s been taxing but Google, RailsCasts, StackOverflow, and many other resources have guided me along without just throwing the answer my way. I like to learn..."
}
    </script>

    <meta name="generator" content="Ghost 0.6">
    <link rel="alternate" type="application/rss+xml" title="code.seanosaur" href="http://localhost:2368/rss/">
    <script type="text/javascript">
      (function() {
        window.PA_SITE_ID = 4399971067549;
        var u='//api.pleasant.io/';
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'pleasant.js'; s.parentNode.insertBefore(g,s);
      })();
    </script>
  </head>
  <body>
    <div class="navbar navbar-inverse navbar-static-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://seanosaur.com" title="seanosaur.com">seanosaur</a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="http://blog.seanosaur.com" title="blog.seanosaur"><i class="fa fa-pencil"></i> Blog</a></li>
        <li><a href="http://code.seanosaur.com" title="code.seanosaur"><i class="fa fa-code"></i> Code</a></li>
        <li class="dropdown">
          <a href="index.html#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" title="Projects"><i class="fa fa-folder-open-o"></i> Projects <i class="fa fa-angle-double-down"></i></a>
          <ul class="dropdown-menu">
            <li><a href="http://read.seanosaur.com" title="Reading List"><i class="fa fa-book"></i> Reading List</a></li>
            <li><a href="http://minecraft.seanosaur.com" title="Minecraft Map"><i class="ion ion-map"></i> Minecraft Map</a></li>
            <li><a href="http://www.mraverage.today" title="Mr. Average"><i class="ion-ios-baseball"></i> Mr. Average</a></li>
            <li><a href="http://birthdays.seanosaur.com" title="Birthdays"><i class="fa fa-birthday-cake"></i> Birthdays</a></li>
          </ul>
        </li>
        <li><a href="http://twitter.com/seanoldham" title="Twitter"><i class="fa fa-twitter fa-lg"></i></a></li>
        <li><a href="http://github.com/seanosaur" title="GitHub"><i class="fa fa-github-alt fa-lg"></i></a></li>
        <li><a href="http://twitch.tv/seanosaur" title="Twitch"><i class="fa fa-twitch fa-lg"></i></a></li>
      </ul>
    </div>
  </div>
</div>
    <div id="ww">
	    <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 centered">
            <main>
  <article class="post tag-ruby tag-programming tag-issue tag-rails">
    <header>
      <h1>Rails Issue #1</h1>
      <h5>
        <time datetime="2014-08-03">Sunday, August 03, 2014</time>
      </h5>
      <h5>Posted in <a href="../../../../tag/ruby/">ruby</a>, <a href="../../../../tag/programming/">programming</a>, <a href="../../../../tag/issue/">issue</a>, <a href="../../../../tag/rails/">rails</a></h5>
    </header>
    <section class="posts">
      <p>As you know, I've been working with Rails for a month or 2 now. It's been taxing but Google, RailsCasts, StackOverflow, and many other resources have guided me along without just throwing the answer my way. I like to learn by doing, not just copy/pasting. Even with all this support, I still have a few things that need working out before the app is complete. I'd like to focus on one of those today.</p>

<p>I intend to use <a href="https://stripe.com">Stripe</a> for payments. We have 3 payment options but for some reason Stripe keeps charging the same amount, no matter which button is clicked. Let me show you the code. Below you'll see the create module of my ChargesController.</p>

<pre><code class="language-prettyprint language-ruby">def create  
  # Amount in cents
  @amount = 999
  @dollar_amount = (@amount / 100.0)

  customer = Stripe::Customer.create(
    :email     =&gt; current_user.email,
    :card     =&gt; params[:stripeToken]
  )

  charge = Stripe::Charge.create(
    :customer         =&gt; customer.id,
    :amount             =&gt; @amount,
    :description     =&gt; 'Rails Stripe customer',
    :currency            =&gt; 'usd'
  )

rescue Stripe::CardError =&gt; e  
  flash[:error] = e.message
  redirect_to charges_path
end  
</code></pre>

<p>Next up, let's take a look at the 3 different payment buttons in the view.</p>

<pre><code class="language-prettyprint language-html">&lt;script src="https://checkout.stripe.com/checkout.js" class="stripe-button"  
    data-key="&lt;%=Rails.configuration.stripe[:publishable_key] %&gt;"
    data-name="Forms to Your Door"
    data-description="Budget-Friendly - $9.99"
    data-amount="999"
    data-panel-label="Pay {{amount}}"&gt;
&lt;/script&gt;  
</code></pre>

<pre><code class="language-prettyprint language-html">&lt;script src="https://checkout.stripe.com/checkout.js" class="stripe-button"  
    data-key="&lt;%= Rails.configuration.stripe[:publishable_key] %&gt;"
    data-name="Forms to Your Door"
    data-description="Test Taker - $14.99"
    data-amount="1499"
    data-panel-label="Pay {{amount}}"&gt;
&lt;/script&gt;  
</code></pre>

<pre><code class="language-prettyprint language-hmtl">&lt;script src="https://checkout.stripe.com/checkout.js" class="stripe-button"  
    data-key="&lt;%= Rails.configuration.stripe[:publishable_key] %&gt;"
    data-name="Forms to Your Door"
    data-description="Dean's List - $19.99"
    data-amount="1999"
    data-panel-label="Pay {{amount}}"&gt;
&lt;/script&gt;  
</code></pre>

<p>As you can see, I have 3 nearly identical payment buttons, but am trying to charge a different amount for each. The problem I'm having is that every time the button is clicked, the controller takes over and uses the <code>@amount = 999</code> variable from the create module. How can I make this work for all 3 items?</p>

<h3 id="update">UPDATE</h3>

<h5 id="120214">(12/02/14)</h5>

<p>This issue has gone unresolved at this point, and we have narrowed the payment options to one. This will allow us to get the user signup process started and receive feedback from our customers regarding price points.</p>
    </section>
    <!-- Add disqus comments here -->
        <div id="disqus_thread"></div>
    <script type="text/javascript">
    var disqus_shortname = 'seanosaur-code'; // required: replace example with your forum shortname
    var disqus_identifier = '9';
 
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </article>
</main>
          </div>
        </div>
	    </div>
  	</div>
    <div id="foot">
      <footer>
  <a href="http://localhost:2368/rss/"><i class="fa fa-rss"></i></a>
  <div class="inner">
    <section class="copyright">All content copyright <a href="http://localhost:2368/">code.seanosaur</a> © 2015 • All rights reserved.</section>
    <section><a href="http://github.com/seanosaur/sydney">Sydney</a> theme created by <a href="http://github.com/seanosaur">seanosaur</a></section>
    <section class="poweredby">Proudly published with <a class="icon-ghost" href="https://ghost.org">Ghost</a></section>
  </div>
</footer>
    </div>
    <script src="../../../../public/jquery.js?v=c7b356b74f"></script>
    <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
    <script src="../../../../assets/js/bootstrap.min.js?v=c7b356b74f"></script>
    <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'seanosaur-code'; // required: replace example with your forum shortname

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function () {
      var s = document.createElement('script'); s.async = true;
      s.type = 'text/javascript';
      s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
      (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
      }());
    </script>
  </body>
